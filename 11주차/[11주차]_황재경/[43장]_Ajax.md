# ğŸ“’43ì¥_ Ajax
### ğŸ“‘ëª©ì°¨
- [Ajax(Asynchronous JavaScript and XML)](#ajaxasynchronous-javascript-and-xml)
- [JSON(JavaScript Object Notation)](#jsonjavascript-object-notation)
- [XMLHttpRequest](#xmlhttprequest)

### âš¡Quick Summary
- *Ajax*
    > **ë¹„ë™ê¸° ë°©ì‹**ìœ¼ë¡œ ë°ì´í„° ì†¡ìˆ˜ì‹  & ë™ì ìœ¼ë¡œ ì›¹í˜ì´ì§€ë¥¼ ê°±ì‹ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹
    - ì „í†µì ì¸ ì›¹í˜ì´ì§€ ë¦¬ë Œë”ë§ íŒ¨ëŸ¬ë‹¤ì„ ì „í™˜
    - ë³€ê²½ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ìˆ˜ì‹  & ë Œë”ë§ â‡’ ë¶€ë“œëŸ¬ìš´ í™”ë©´ ì „í™˜
- *JSON*
    > í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ HTTP í†µì‹ ì„ ìœ„í•œ í…ìŠ¤íŠ¸ ë°ì´í„° í¬ë§·
    - ì´ë¦„ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ë“¤ì–´ ìˆì§€ë§Œ ë…ë¦½í˜• ë°ì´í„° í¬ë§·ìœ¼ë¡œ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
    - ê°ì²´/ë°°ì—´ â†” JSON ë¬¸ìì—´
        - `JSON.stringify` ë©”ì„œë“œ
            - ê°ì²´/ë°°ì—´ â†’ JSON ë¬¸ìì—´
            - ì§ë ¬í™”(serialize)
        - `JSON.parse` ë©”ì„œë“œ
            - JSON ë¬¸ìì—´ â†’ ê°ì²´/ë°°ì—´
            - ì—­ì§ë ¬í™”(deserialize)
- *XMLHttpRequest*
    > ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ HTTP ìš”ì²­ì„ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Web API ê°ì²´ë¡œ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ë™ì‘

## ğŸ“ŒAjax(Asynchronous JavaScript and XML)
> ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì—ê²Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³ , ì„œë²„ê°€ ì‘ë‹µí•œ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì›¹í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹
- ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” Web APIì¸ `XMLHttpRequest` ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘
    - `XMLHttpRequest`ëŠ” HTTP ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¥¼ ì œê³µ
    - 1999ë…„ ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ê°€ ê°œë°œ
- ì´ì „ ì›¹í˜ì´ì§€ëŠ” ì™„ì „í•œ HTMLì„ ì„œë²„ë¡œë¶€í„° ì „ì†¡ë°›ì•„ ì›¹í˜ì´ì§€ë¥¼ ë¦¬ë Œë”ë§
    - ì´ì „ ì›¹í˜ì´ì§€ì™€ ì°¨ì´ê°€ ì—†ì–´ì„œ ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ê¹Œì§€ í¬í•¨ëœ ì™„ì „í•œ HTMLì„ ì„œë²„ë¡œë¶€í„° ë§¤ë²ˆ ë‹¤ì‹œ ì „ì†¡ë°›ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë°ì´í„° í†µì‹  ë°œìƒ
    - ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ê¹Œì§€ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë Œë”ë§í•˜ê¸° ë•Œë¬¸ì— í™”ë©´ ì „í™˜ì´ ì¼ì–´ë‚˜ë©´ í™”ë©´ì´ ìˆœê°„ì ìœ¼ë¡œ ê¹œë¹¡ì´ëŠ” í˜„ìƒ ë°œìƒ
    - í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ í†µì‹ ì´ ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ë¡œë¶€í„° ì‘ë‹µì´ ìˆì„ ë•Œê¹Œì§€ ë‹¤ìŒ ì²˜ë¦¬ëŠ” ë¸”ë¡œí‚¹ë¨
    ![image](https://github.com/namu56/modern-javascript-study/assets/71831926/da03cae2-2310-47b2-8e6a-8c276f6c7f08)
- Ajaxì˜ ë“±ì¥ìœ¼ë¡œ ì´ì „ì˜ ì „í†µì ì¸ íŒ¨ëŸ¬ë‹¤ì„ ì „í™˜
    - ë³€ê²½ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ì„œë²„ë¡œë¶€í„° ì „ì†¡ë°›ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ë°ì´í„° í†µì‹ ì´ ë°œìƒí•˜ì§€ ì•ŠìŒ
    - ë³€ê²½í•  í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ì€ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í™”ë©´ì´ ê¹œë¹¡ì´ëŠ” í˜„ìƒ ë°œìƒ X (ë¶€ë“œëŸ¬ìš´ í™”ë©´ ì „í™˜)
    - í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì™€ì˜ í†µì‹ ì´ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ì—ê²Œ ìš”ì²­ì„ ë³´ë‚¸ ì´í›„ ë¸”ë¡œí‚¹ ë°œìƒ X
    ![image](https://github.com/namu56/modern-javascript-study/assets/71831926/672d0407-e736-4255-b232-51b8431d8440)


## ğŸ“ŒJSON(JavaScript Object Notation)
> í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ HTTP í†µì‹ ì„ ìœ„í•œ í…ìŠ¤íŠ¸ ë°ì´í„° í¬ë§·
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” ë…ë¦½í˜• ë°ì´í„° í¬ë§·ìœ¼ë¡œ, ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥

### JSON í‘œê¸° ë°©ì‹
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê°ì²´ ë¦¬í„°ëŸ´ê³¼ ìœ ì‚¬í•˜ê²Œ í‚¤ì™€ ê°’ìœ¼ë¡œ êµ¬ì„±ëœ ìˆœìˆ˜í•œ í…ìŠ¤íŠ¸
- â­JSONì˜ í‚¤ëŠ” ë°˜ë“œì‹œ í°ë”°ì˜´í‘œ(ì‘ì€ë”°ì˜´í‘œ ì‚¬ìš© ë¶ˆê°€)ë¡œ ë¬¶ì–´ì•¼ í•¨! ë¬¸ìì—´ë„ ë§ˆì°¬ê°€ì§€!
    ```json
    {
        "name": "Hwang",
        "age": 20,
        "alive": true,
        "hobby": ["basketball", "tennis"]
    }
    ```

### JSON.stringify
- âœ”ï¸í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ê°ì²´ë¥¼ ì „ì†¡í•˜ë ¤ë©´ ê°ì²´ë¥¼ ë¬¸ìì—´í™”í•˜ëŠ” **ì§ë ¬í™”**(serialize)ë¥¼ í•´ì•¼ í•¨!
- `JSON.stringify` ë©”ì„œë“œëŠ” **ê°ì²´/ë°°ì—´**ì„ **JSON í¬ë§·ì˜ ë¬¸ìì—´**ë¡œ ë³€í™˜
    ```js
    JSON.stringify(value[, replacer[, space]])
    ```
    - `value`: JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•  ê°’
    - `replacer`
        - ë¬¸ìì—´í™” ë™ì‘ ë°©ì‹ì„ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜, í˜¹ì€ JSON ë¬¸ìì—´ì— í¬í•¨ë  ê°’ ê°ì²´ì˜ ì†ì„±ë“¤ì„ ì„ íƒí•˜ê¸° ìœ„í•œ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸(whitelist)ë¡œ ì“°ì´ëŠ” Stringê³¼ Number ê°ì²´ë“¤ì˜ ë°°ì—´
        - ì´ ê°’ì´ `null` ì´ê±°ë‚˜ ì œê³µë˜ì§€ ì•Šìœ¼ë©´, ê°ì²´ì˜ ëª¨ë“  ì†ì„±ë“¤ì´ JSON ë¬¸ìì—´ ê²°ê³¼ì— í¬í•¨ë¨
    - `space`
        - ê°€ë…ì„±ì„ ëª©ì ìœ¼ë¡œ JSON ë¬¸ìì—´ ì¶œë ¥ì— ê³µë°±ì„ ì‚½ì…í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” String ë˜ëŠ” Number ê°ì²´
        - Number ê°ì²´ì¸ ê²½ìš°
            - ê³µë°±ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìŠ¤í˜ì´ìŠ¤(space) ê°œìˆ˜
            - 1ë³´ë‹¤ ì‘ìœ¼ë©´ ìŠ¤í˜ì´ìŠ¤ ì‚¬ìš© X, 10ë³´ë‹¤ í¬ë©´ 10ìœ¼ë¡œ ì œí•œ
        - String ê°ì²´ì¸ ê²½ìš°
            - ë¬¸ìì—´(ê¸¸ì´ê°€ 10ë³´ë‹¤ ê¸¸ë©´ ì²˜ìŒ 10ê°œ ë¬¸ìë¡œ ì œí•œ)ì´ ê³µë°±ìœ¼ë¡œ ì‚¬ìš©ë¨
        - ì´ ê°’ì´ `null` ì´ê±°ë‚˜ ì œê³µë˜ì§€ ì•Šìœ¼ë©´, ê³µë°± ì‚¬ìš© X

### JSON.parse
- âœ”ï¸ì„œë²„ë¡œë¶€í„° í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡ëœ JSON ë°ì´í„°ëŠ” ë¬¸ìì—´ì´ë¯€ë¡œ ê°ì²´í™”í•˜ëŠ” **ì—­ì§ë ¬í™”**(deserializing)ë¥¼ í•´ì•¼ í•¨!
- `JSON.stringify` ë©”ì„œë“œëŠ” JSON í¬ë§·ì˜ ë¬¸ìì—´ì„ ê°ì²´/ë°°ì—´ë¡œ ë³€í™˜ (`JSON.stringify` ë©”ì„œë“œì˜ ì—­ì—°ì‚°)
    ```js
    JSON.parse(text[, reviver])
    ```
    - `text`: JSONìœ¼ë¡œ ë³€í™˜í•  ë¬¸ìì—´
    - `reviver`: í•¨ìˆ˜ë¼ë©´ ë³€í™˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê¸° ì „ì— ì´ ì¸ìˆ˜ì— ì „ë‹¬í•´ ë³€í˜•

## ğŸ“ŒXMLHttpRequest
> ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ HTTP ìš”ì²­ì„ ì „ì†¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Web API ê°ì²´
### ê°ì²´ ìƒì„±
- ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ
- âœ”ï¸XMLHttpRequest ê°ì²´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” Web APIì´ë¯€ë¡œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë¨
```js
const xhr = new XMLHttpRequest();
```

### [ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ](https://developer.mozilla.org/ko/docs/Web/API/XMLHttpRequest)
- í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°
    - `readyState`: HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜ (0 ~ 4)
    - `status`: HTTP ìš”ì²­ì— ëŒ€í•œ HTTP ìƒíƒœ ì½”ë“œ
    - `statusText`: HTTP ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ë©”ì‹œì§€
    - `responseType`: HTTP ì‘ë‹µ íƒ€ì…
    - `response`: ì‘ë‹µ ëª¸ì²´(response body)
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°
    - `onreadystatechange`: readyState í”„ë¡œí¼í‹° ê°’ì´ ë³€ê²½ëœ ê²½ìš°
    - `onerror`: HTTP ìš”ì²­ì— ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš°
    - `onload`: HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•œ ê²½ìš°
- ë©”ì„œë“œ
    - `open`: HTTP ìš”ì²­ ì´ˆê¸°í™”
    - `send`: HTTP ìš”ì²­ ì „ì†¡
    - `abort`: ì´ë¯¸ ì „ì†¡ëœ HTTP ìš”ì²­ ì¤‘ë‹¨
    - `setRequestHeader`: íŠ¹ì • HTTP ìš”ì²­ í—¤ë”ì˜ ê°’ì„ ì„¤ì •

### HTTP ìš”ì²­ ì „ì†¡
- í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ìš”ì²­ì˜ ì¢…ë¥˜ì™€ ëª©ì (ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ í–‰ìœ„)ì„ ì•Œë¦¬ëŠ” **HTTP ìš”ì²­ ë©”ì„œë“œ**(GET, POST, PUT, PATCH, DELETE ë“±) ì‚¬ìš©
```js
// XMLHttpRequest ê°ì²´ ìƒì„±
const xhr = new XMLHttpRequest();

// HTTP ìš”ì²­ ì´ˆê¸°í™”
xhr.open('GET', '/users');

// HTTP ìš”ì²­ í—¤ë” ì„¤ì •
// í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ì „ì†¡í•  ë°ì´í„°ì˜ MIME íƒ€ì… ì§€ì •: json
xhr.setRequestHeader('content-type', 'application/json');

// HTTP ìš”ì²­ ì „ì†¡
xhr.send();
```
- payload(request body)ì— ë‹´ì•„ ë³´ë‚¼ ë°ì´í„°ëŠ” `JSON.stringify` ë©”ì„œë“œë¡œ ì§ë ¬í™”í•œ í›„ ì „ë‹¬
```js
// XMLHttpRequest ê°ì²´ ìƒì„±
const xhr = new XMLHttpRequest();

// HTTP ìš”ì²­ ì´ˆê¸°í™”
xhr.open('POST', '/users');

// HTTP ìš”ì²­ í—¤ë” ì„¤ì •
// í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ ì „ì†¡í•  ë°ì´í„°ì˜ MIME íƒ€ì… ì§€ì •: json
xhr.setRequestHeader('content-type', 'application/json');

// HTTP ìš”ì²­ ì „ì†¡
xhr.send(JSON.stringify({ id: 1, content: 'HTML', completed: false }));
```

### HTTP ì‘ë‹µ ì²˜ë¦¬
- ì„œë²„ê°€ ì „ì†¡í•œ ì‘ë‹µì„ ì²˜ë¦¬í•˜ë ¤ë©´ `XMLHttpRequest` ê°ì²´ê°€ ë°œìƒì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•´ì•¼ í•¨
- `onreadystatechange` ì´ë²¤íŠ¸ ì‚¬ìš©
    ```js
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    // https://jsonplaceholder.typicode.comì€ Fake REST APIë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë‹¤.
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send();

    // readystatechange ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” readyState í”„ë¡œí¼í‹°ê°€
    // ë³€ê²½ë  ë•Œë§ˆë‹¤ ë°œìƒí•œë‹¤.
    xhr.onreadystatechange = () => {
        // readyState í”„ë¡œí¼í‹°ëŠ” HTTP ìš”ì²­ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // readyState í”„ë¡œí¼í‹° ê°’ì´ 4(XMLHttpRequest.DONE)ê°€ ì•„ë‹ˆë©´ ì„œë²„ ì‘ë‹µì´ ì™„ë£Œë˜ì§€ ìƒíƒœë‹¤.
        // ë§Œì•½ ì„œë²„ ì‘ë‹µì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì•„ë¬´ëŸ° ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.
        if (xhr.readyState !== XMLHttpRequest.DONE) return;

        // status í”„ë¡œí¼í‹°ëŠ” ì‘ë‹µ ìƒíƒœ ì½”ë“œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœì´ê³ 
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœë‹¤.
        // ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœë¼ë©´ response í”„ë¡œí¼í‹°ì— ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ê°€ ë‹´ê²¨ ìˆë‹¤.
        if (xhr.status === 200) {
            console.log(JSON.parse(xhr.response));
            // {userId: 1, id: 1, title: "delectus aut autem", completed: false}
        } else {
            console.error('Error', xhr.status, xhr.statusText);
        }
    };
    ```
- `onload` ì´ë²¤íŠ¸ ì‚¬ìš©
    ```js
    // XMLHttpRequest ê°ì²´ ìƒì„±
    const xhr = new XMLHttpRequest();

    // HTTP ìš”ì²­ ì´ˆê¸°í™”
    // https://jsonplaceholder.typicode.comì€ Fake REST APIë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë‹¤.
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');

    // HTTP ìš”ì²­ ì „ì†¡
    xhr.send();

    // load ì´ë²¤íŠ¸ëŠ” HTTP ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ê²½ìš° ë°œìƒí•œë‹¤.
    xhr.onload = () => {
        // status í”„ë¡œí¼í‹°ëŠ” ì‘ë‹µ ìƒíƒœ ì½”ë“œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœì´ê³ 
        // status í”„ë¡œí¼í‹° ê°’ì´ 200ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœë‹¤.
        // ì •ìƒì ìœ¼ë¡œ ì‘ë‹µëœ ìƒíƒœë¼ë©´ response í”„ë¡œí¼í‹°ì— ì„œë²„ì˜ ì‘ë‹µ ê²°ê³¼ê°€ ë‹´ê²¨ ìˆë‹¤.
        if (xhr.status === 200) {
            console.log(JSON.parse(xhr.response));
            // {userId: 1, id: 1, title: "delectus aut autem", completed: false}
        } else {
            console.error('Error', xhr.status, xhr.statusText);
        }
    };
    ```